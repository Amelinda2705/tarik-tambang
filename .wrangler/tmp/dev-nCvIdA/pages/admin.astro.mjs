globalThis.process ??= {}; globalThis.process.env ??= {};
import { e as createComponent, f as createAstro, r as renderTemplate, k as renderComponent, m as maybeRenderHead } from '../chunks/astro/server_B-bDRWSY.mjs';
/* empty css                                 */
import { $ as $$Layout } from '../chunks/Layout_E6Phd4JU.mjs';
export { renderers } from '../renderers.mjs';

var __freeze = Object.freeze;
var __defProp = Object.defineProperty;
var __template = (cooked, raw) => __freeze(__defProp(cooked, "raw", { value: __freeze(raw || cooked.slice()) }));
var _a;
const $$Astro = createAstro();
const prerender = false;
const $$Admin = createComponent(async ($$result, $$props, $$slots) => {
  const Astro2 = $$result.createAstro($$Astro, $$props, $$slots);
  Astro2.self = $$Admin;
  const url = new URL(Astro2.request.url);
  const successParam = url.searchParams.get("success");
  const errorParam = url.searchParams.get("error");
  let successMessage = "";
  let errorMessage = "";
  if (successParam === "created")
    successMessage = "Question created successfully!";
  if (successParam === "updated")
    successMessage = "Question updated successfully!";
  if (successParam === "deleted")
    successMessage = "Question deleted successfully!";
  if (errorParam) errorMessage = "An error occurred. Please try again.";
  return renderTemplate(_a || (_a = __template(["", ' <script type="module">\n    async function loadQuestions() {\n        try {\n            const response = await fetch("/api/questions");\n\n            if (!response.ok) {\n                const errorData = await response.json().catch(() => ({}));\n                console.error("Server error:", errorData);\n                throw new Error(\n                    `HTTP error! status: ${response.status} - ${errorData.message || "Unknown error"}`\n                );\n            }\n\n            const questions = await response.json();\n            console.log("Loaded questions:", questions);\n            displayQuestions(questions);\n        } catch (error) {\n            console.error("Error loading questions:", error);\n            document.getElementById("loading").innerHTML =\n                `<div class="text-red-600">Error loading questions: ${error.message}</div>`;\n        }\n    }\n\n    function displayQuestions(questions) {\n        const container = document.getElementById("questions-container");\n        const loading = document.getElementById("loading");\n\n        if (questions.length === 0) {\n            container.innerHTML = "<p>No questions found.</p>";\n        } else {\n            container.innerHTML = questions\n                .map(\n                    ({ id, question, answer }) => `\n                <div class="bg-(--white) text-black mb-5 p-5 rounded-lg">\n                    <p class="text-2xl font-black">${id}.</p>\n                    <p class="mb-2">\n                        <span class="text-gray-500 font-semibold">Question:</span>\n                        ${question}\n                    </p>\n                    <p class="mb-4">\n                        <span class="text-gray-500 font-semibold">Answer:</span>\n                        ${answer}\n                    </p>\n                    <div>\n                        <button class="action-btn edit-btn" \n                                data-id="${id}" \n                                data-question="${question}" \n                                data-answer="${answer}"\n                                onclick="editQuestion(this)">\n                            Edit\n                        </button>\n                        <form action="/api/admin" method="POST" style="display: inline;">\n                            <input type="hidden" name="action" value="delete" />\n                            <input type="hidden" name="id" value="${id}" />\n                            <button type="submit" class="action-btn delete-btn"\n                                    onclick="return confirm(\'Are you sure you want to delete this question?\')">\n                                Delete\n                            </button>\n                        </form>\n                    </div>\n                </div>\n            `\n                )\n                .join("");\n        }\n\n        loading.classList.add("hidden");\n        container.classList.remove("hidden");\n    }\n\n    // Load questions when page loads\n    document.addEventListener("DOMContentLoaded", loadQuestions);\n\n    // Force reload on back/forward navigation\n    window.addEventListener("pageshow", function (event) {\n        if (event.persisted) {\n            loadQuestions();\n        }\n    });\n\n    document.getElementById("addQuestion").onclick = function () {\n        document.getElementById("popupTitle").textContent = "Add New Question";\n        document.getElementById("questionForm").reset();\n        document.getElementById("formAction").value = "create";\n        document.getElementById("editId").value = "";\n        document\n            .getElementById("popupContainer")\n            .classList.remove("popup-hidden");\n    };\n\n    document.getElementById("close").onclick = function () {\n        document.getElementById("popupContainer").classList.add("popup-hidden");\n    };\n\n    document.getElementById("popupContainer").onclick = function (e) {\n        if (e.target.id === "popupContainer") {\n            document\n                .getElementById("popupContainer")\n                .classList.add("popup-hidden");\n        }\n    };\n\n    window.editQuestion = function (button) {\n        const id = button.dataset.id;\n        const question = button.dataset.question;\n        const answer = button.dataset.answer;\n\n        document.getElementById("popupTitle").textContent = "Edit Question";\n        document.getElementById("formAction").value = "update";\n        document.getElementById("editId").value = id;\n        document.getElementById("question").value = question;\n        document.getElementById("answer").value = answer;\n        document\n            .getElementById("popupContainer")\n            .classList.remove("popup-hidden");\n    };\n<\/script>'], ["", ' <script type="module">\n    async function loadQuestions() {\n        try {\n            const response = await fetch("/api/questions");\n\n            if (!response.ok) {\n                const errorData = await response.json().catch(() => ({}));\n                console.error("Server error:", errorData);\n                throw new Error(\n                    \\`HTTP error! status: \\${response.status} - \\${errorData.message || "Unknown error"}\\`\n                );\n            }\n\n            const questions = await response.json();\n            console.log("Loaded questions:", questions);\n            displayQuestions(questions);\n        } catch (error) {\n            console.error("Error loading questions:", error);\n            document.getElementById("loading").innerHTML =\n                \\`<div class="text-red-600">Error loading questions: \\${error.message}</div>\\`;\n        }\n    }\n\n    function displayQuestions(questions) {\n        const container = document.getElementById("questions-container");\n        const loading = document.getElementById("loading");\n\n        if (questions.length === 0) {\n            container.innerHTML = "<p>No questions found.</p>";\n        } else {\n            container.innerHTML = questions\n                .map(\n                    ({ id, question, answer }) => \\`\n                <div class="bg-(--white) text-black mb-5 p-5 rounded-lg">\n                    <p class="text-2xl font-black">\\${id}.</p>\n                    <p class="mb-2">\n                        <span class="text-gray-500 font-semibold">Question:</span>\n                        \\${question}\n                    </p>\n                    <p class="mb-4">\n                        <span class="text-gray-500 font-semibold">Answer:</span>\n                        \\${answer}\n                    </p>\n                    <div>\n                        <button class="action-btn edit-btn" \n                                data-id="\\${id}" \n                                data-question="\\${question}" \n                                data-answer="\\${answer}"\n                                onclick="editQuestion(this)">\n                            Edit\n                        </button>\n                        <form action="/api/admin" method="POST" style="display: inline;">\n                            <input type="hidden" name="action" value="delete" />\n                            <input type="hidden" name="id" value="\\${id}" />\n                            <button type="submit" class="action-btn delete-btn"\n                                    onclick="return confirm(\'Are you sure you want to delete this question?\')">\n                                Delete\n                            </button>\n                        </form>\n                    </div>\n                </div>\n            \\`\n                )\n                .join("");\n        }\n\n        loading.classList.add("hidden");\n        container.classList.remove("hidden");\n    }\n\n    // Load questions when page loads\n    document.addEventListener("DOMContentLoaded", loadQuestions);\n\n    // Force reload on back/forward navigation\n    window.addEventListener("pageshow", function (event) {\n        if (event.persisted) {\n            loadQuestions();\n        }\n    });\n\n    document.getElementById("addQuestion").onclick = function () {\n        document.getElementById("popupTitle").textContent = "Add New Question";\n        document.getElementById("questionForm").reset();\n        document.getElementById("formAction").value = "create";\n        document.getElementById("editId").value = "";\n        document\n            .getElementById("popupContainer")\n            .classList.remove("popup-hidden");\n    };\n\n    document.getElementById("close").onclick = function () {\n        document.getElementById("popupContainer").classList.add("popup-hidden");\n    };\n\n    document.getElementById("popupContainer").onclick = function (e) {\n        if (e.target.id === "popupContainer") {\n            document\n                .getElementById("popupContainer")\n                .classList.add("popup-hidden");\n        }\n    };\n\n    window.editQuestion = function (button) {\n        const id = button.dataset.id;\n        const question = button.dataset.question;\n        const answer = button.dataset.answer;\n\n        document.getElementById("popupTitle").textContent = "Edit Question";\n        document.getElementById("formAction").value = "update";\n        document.getElementById("editId").value = id;\n        document.getElementById("question").value = question;\n        document.getElementById("answer").value = answer;\n        document\n            .getElementById("popupContainer")\n            .classList.remove("popup-hidden");\n    };\n<\/script>'])), renderComponent($$result, "Layout", $$Layout, {}, { "default": async ($$result2) => renderTemplate` ${maybeRenderHead()}<main id="adminPage"> <div id="popupContainer" class="popup-hidden fixed top-0 left-0 w-full h-full bg-gray-600/60 flex justify-center items-center z-50"> <div class="popup-content bg-white p-8 rounded-lg shadow-md relative max-w-md w-full mx-4"> <span class="close-button absolute top-2 right-3 text-2xl cursor-pointer hover:text-red-600" id="close">&times;</span> <h2 class="text-xl font-bold mb-4" id="popupTitle">
Add New Question
</h2> <form id="questionForm" action="/api/admin" method="POST"> <input type="hidden" name="action" id="formAction" value="create"> <input type="hidden" name="id" id="editId" value=""> <label for="question">Question: </label> <input type="text" id="question" name="question" required> <label for="answer">Answer: </label> <input type="number" id="answer" name="answer" required> <button type="submit">Submit</button> </form> </div> </div> <div class="p-6"> ${successMessage && renderTemplate`<div class="alert alert-success">${successMessage}</div>`} ${errorMessage && renderTemplate`<div class="alert alert-error">${errorMessage}</div>`} <button class="border-2 rounded-3xl hover:bg-blue-700 text-(--white) font-bold py-2 px-8 mb-4"> <a href="/">Back Home</a> </button> <button id="addQuestion" class="border-2 rounded-3xl hover:bg-blue-700 text-(--white) font-bold py-2 px-8 mb-4">
Add New Question
</button> <!-- Loading state --> <div id="loading" class="text-center py-4">
Loading questions...
</div> <!-- Questions container --> <div id="questions-container" class="mt-6 hidden"> <!-- Questions will be loaded here --> </div> </div> </main> ` }));
}, "D:/dev/physicsgame/src/pages/admin.astro", void 0);

const $$file = "D:/dev/physicsgame/src/pages/admin.astro";
const $$url = "/admin";

const _page = /*#__PURE__*/Object.freeze(/*#__PURE__*/Object.defineProperty({
    __proto__: null,
    default: $$Admin,
    file: $$file,
    prerender,
    url: $$url
}, Symbol.toStringTag, { value: 'Module' }));

const page = () => _page;

export { page };
