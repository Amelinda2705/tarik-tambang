globalThis.process ??= {}; globalThis.process.env ??= {};
import { e as createComponent, f as createAstro, r as renderTemplate, k as renderComponent, m as maybeRenderHead } from '../chunks/astro/server_B-bDRWSY.mjs';
import { $ as $$Layout } from '../chunks/Layout_E6Phd4JU.mjs';
export { renderers } from '../renderers.mjs';

var __freeze = Object.freeze;
var __defProp = Object.defineProperty;
var __template = (cooked, raw) => __freeze(__defProp(cooked, "raw", { value: __freeze(raw || cooked.slice()) }));
var _a;
const $$Astro = createAstro();
const $$Game = createComponent(async ($$result, $$props, $$slots) => {
  const Astro2 = $$result.createAstro($$Astro, $$props, $$slots);
  Astro2.self = $$Game;
  let questions = [];
  try {
    const response = await fetch(
      `${new URL(Astro2.request.url).origin}/api/questions`
    );
    if (response.ok) {
      questions = await response.json();
    } else {
      console.error("Failed to fetch questions:", response.status);
    }
  } catch (error) {
    console.error("Error fetching questions:", error);
  }
  return renderTemplate(_a || (_a = __template(["", ' <script type="module">\n    const blueAvatarImg = "/assets/blue.png";\n    const redAvatarImg = "/assets/red.png";\n\n    // Initialize with empty questions, will be loaded from API\n    const gameState = {\n        questions: [],\n        currentQuestionIndex: 0,\n        teamAScore: 0,\n        teamBScore: 0,\n        blueX: 100,\n        redX: 500,\n        brownX: 208,\n        gameEnded: false,\n    };\n\n    const winningScore = 5;\n    const step = 10;\n\n    const elements = {\n        canvas: document.getElementById("canvas"),\n        teamA: {\n            teamA: document.getElementById("team-a"),\n            numbers: document.querySelectorAll(".number-a"),\n            clear: document.getElementById("clear-a"),\n            submit: document.getElementById("submit-a"),\n            display: document.getElementById("display-a"),\n            question: document.getElementById("question-a"),\n        },\n        teamB: {\n            teamB: document.getElementById("team-b"),\n            numbers: document.querySelectorAll(".number-b"),\n            clear: document.getElementById("clear-b"),\n            submit: document.getElementById("submit-b"),\n            display: document.getElementById("display-b"),\n            question: document.getElementById("question-b"),\n        },\n    };\n\n    const ctx = elements.canvas.getContext("2d");\n\n    // Load questions from API\n    async function loadQuestions() {\n        try {\n            const response = await fetch("/api/questions");\n            if (response.ok) {\n                const questions = await response.json();\n                gameState.questions = questions;\n                console.log("Questions loaded:", questions);\n                updateQuestion();\n            } else {\n                console.error("Failed to load questions:", response.status);\n            }\n        } catch (error) {\n            console.error("Error loading questions:", error);\n        }\n    }\n\n    function drawAvatar() {\n        const blueAvatar = new Image();\n        const redAvatar = new Image();\n        blueAvatar.src = blueAvatarImg;\n        redAvatar.src = redAvatarImg;\n        ctx.clearRect(\n            0,\n            0,\n            elements.canvas.clientWidth,\n            elements.canvas.clientHeight\n        );\n        blueAvatar.onload = () => {\n            ctx.drawImage(blueAvatar, gameState.blueX, 30);\n        };\n        redAvatar.onload = () => {\n            ctx.drawImage(redAvatar, gameState.redX, 30);\n            ctx.fillStyle = "#3E2630";\n            ctx.fillRect(gameState.brownX, 132, 292, 13);\n        };\n    }\n\n    function initGame() {\n        drawAvatar();\n        loadQuestions(); // Load questions when game starts\n    }\n\n    function updateQuestion() {\n        if (gameState.questions.length === 0) {\n            console.log("No questions available");\n            elements.teamA.question.textContent = "No questions available";\n            elements.teamB.question.textContent = "No questions available";\n            return;\n        }\n\n        const currentQuestion =\n            gameState.questions[gameState.currentQuestionIndex];\n        console.log("Current Question:", currentQuestion);\n        elements.teamA.question.textContent = currentQuestion.question;\n        elements.teamB.question.textContent = currentQuestion.question;\n    }\n\n    function setupNumberInputs(team) {\n        team.numbers.forEach((button) => {\n            button.addEventListener("click", function () {\n                if (!gameState.gameEnded && gameState.questions.length > 0) {\n                    let value = this.value;\n                    team.display.value += value;\n                }\n            });\n        });\n    }\n\n    function setupClearButton(team) {\n        team.clear.addEventListener("click", () => {\n            team.display.value = "";\n        });\n    }\n\n    function showWrong(displayElement) {\n        displayElement.classList.add("bg-red-300");\n        setTimeout(() => {\n            displayElement.classList.remove("bg-red-300");\n        }, 300);\n    }\n\n    function checkWin(team, teamName) {\n        if (team.score >= winningScore) {\n            gameState.gameEnded = true;\n            gameState.brownX = 190;\n            gameState.blueX = 100;\n            gameState.redX = 500;\n            alert(`${teamName} wins!`);\n            return true;\n        }\n        return false;\n    }\n\n    function setupSubmitButton(team, isTeamA) {\n        team.submit.addEventListener("click", () => {\n            if (gameState.gameEnded || gameState.questions.length === 0) return;\n\n            const currentQuestion =\n                gameState.questions[gameState.currentQuestionIndex];\n            const userAnswer = team.display.value;\n            console.log("User Answer:", userAnswer);\n            console.log("Correct Answer:", currentQuestion.answer);\n\n            if (userAnswer == currentQuestion.answer) {\n                if (isTeamA) {\n                    gameState.teamAScore++;\n                    gameState.teamBScore = Math.max(\n                        0,\n                        gameState.teamBScore - 1\n                    );\n                    gameState.blueX -= step;\n                    gameState.redX -= step;\n                    gameState.brownX -= step;\n                    drawAvatar();\n                } else {\n                    gameState.teamBScore++;\n                    gameState.teamAScore = Math.max(\n                        0,\n                        gameState.teamAScore - 1\n                    );\n                    gameState.blueX += step;\n                    gameState.redX += step;\n                    gameState.brownX += step;\n                    drawAvatar();\n                }\n\n                team.display.value = "";\n\n                const teamName = isTeamA ? "Team A" : "Team B";\n                console.log(`${teamName} scored!`);\n                const currentTeam = isTeamA\n                    ? { score: gameState.teamAScore }\n                    : { score: gameState.teamBScore };\n\n                if (!checkWin(currentTeam, teamName)) {\n                    gameState.currentQuestionIndex =\n                        (gameState.currentQuestionIndex + 1) %\n                        gameState.questions.length;\n                    updateQuestion();\n                }\n            } else {\n                team.display.value = "";\n                showWrong(team.display);\n            }\n        });\n    }\n\n    // Initialize the game\n    setupNumberInputs(elements.teamA);\n    setupNumberInputs(elements.teamB);\n    setupClearButton(elements.teamA);\n    setupClearButton(elements.teamB);\n    setupSubmitButton(elements.teamA, true);\n    setupSubmitButton(elements.teamB, false);\n    initGame();\n<\/script>'], ["", ' <script type="module">\n    const blueAvatarImg = "/assets/blue.png";\n    const redAvatarImg = "/assets/red.png";\n\n    // Initialize with empty questions, will be loaded from API\n    const gameState = {\n        questions: [],\n        currentQuestionIndex: 0,\n        teamAScore: 0,\n        teamBScore: 0,\n        blueX: 100,\n        redX: 500,\n        brownX: 208,\n        gameEnded: false,\n    };\n\n    const winningScore = 5;\n    const step = 10;\n\n    const elements = {\n        canvas: document.getElementById("canvas"),\n        teamA: {\n            teamA: document.getElementById("team-a"),\n            numbers: document.querySelectorAll(".number-a"),\n            clear: document.getElementById("clear-a"),\n            submit: document.getElementById("submit-a"),\n            display: document.getElementById("display-a"),\n            question: document.getElementById("question-a"),\n        },\n        teamB: {\n            teamB: document.getElementById("team-b"),\n            numbers: document.querySelectorAll(".number-b"),\n            clear: document.getElementById("clear-b"),\n            submit: document.getElementById("submit-b"),\n            display: document.getElementById("display-b"),\n            question: document.getElementById("question-b"),\n        },\n    };\n\n    const ctx = elements.canvas.getContext("2d");\n\n    // Load questions from API\n    async function loadQuestions() {\n        try {\n            const response = await fetch("/api/questions");\n            if (response.ok) {\n                const questions = await response.json();\n                gameState.questions = questions;\n                console.log("Questions loaded:", questions);\n                updateQuestion();\n            } else {\n                console.error("Failed to load questions:", response.status);\n            }\n        } catch (error) {\n            console.error("Error loading questions:", error);\n        }\n    }\n\n    function drawAvatar() {\n        const blueAvatar = new Image();\n        const redAvatar = new Image();\n        blueAvatar.src = blueAvatarImg;\n        redAvatar.src = redAvatarImg;\n        ctx.clearRect(\n            0,\n            0,\n            elements.canvas.clientWidth,\n            elements.canvas.clientHeight\n        );\n        blueAvatar.onload = () => {\n            ctx.drawImage(blueAvatar, gameState.blueX, 30);\n        };\n        redAvatar.onload = () => {\n            ctx.drawImage(redAvatar, gameState.redX, 30);\n            ctx.fillStyle = "#3E2630";\n            ctx.fillRect(gameState.brownX, 132, 292, 13);\n        };\n    }\n\n    function initGame() {\n        drawAvatar();\n        loadQuestions(); // Load questions when game starts\n    }\n\n    function updateQuestion() {\n        if (gameState.questions.length === 0) {\n            console.log("No questions available");\n            elements.teamA.question.textContent = "No questions available";\n            elements.teamB.question.textContent = "No questions available";\n            return;\n        }\n\n        const currentQuestion =\n            gameState.questions[gameState.currentQuestionIndex];\n        console.log("Current Question:", currentQuestion);\n        elements.teamA.question.textContent = currentQuestion.question;\n        elements.teamB.question.textContent = currentQuestion.question;\n    }\n\n    function setupNumberInputs(team) {\n        team.numbers.forEach((button) => {\n            button.addEventListener("click", function () {\n                if (!gameState.gameEnded && gameState.questions.length > 0) {\n                    let value = this.value;\n                    team.display.value += value;\n                }\n            });\n        });\n    }\n\n    function setupClearButton(team) {\n        team.clear.addEventListener("click", () => {\n            team.display.value = "";\n        });\n    }\n\n    function showWrong(displayElement) {\n        displayElement.classList.add("bg-red-300");\n        setTimeout(() => {\n            displayElement.classList.remove("bg-red-300");\n        }, 300);\n    }\n\n    function checkWin(team, teamName) {\n        if (team.score >= winningScore) {\n            gameState.gameEnded = true;\n            gameState.brownX = 190;\n            gameState.blueX = 100;\n            gameState.redX = 500;\n            alert(\\`\\${teamName} wins!\\`);\n            return true;\n        }\n        return false;\n    }\n\n    function setupSubmitButton(team, isTeamA) {\n        team.submit.addEventListener("click", () => {\n            if (gameState.gameEnded || gameState.questions.length === 0) return;\n\n            const currentQuestion =\n                gameState.questions[gameState.currentQuestionIndex];\n            const userAnswer = team.display.value;\n            console.log("User Answer:", userAnswer);\n            console.log("Correct Answer:", currentQuestion.answer);\n\n            if (userAnswer == currentQuestion.answer) {\n                if (isTeamA) {\n                    gameState.teamAScore++;\n                    gameState.teamBScore = Math.max(\n                        0,\n                        gameState.teamBScore - 1\n                    );\n                    gameState.blueX -= step;\n                    gameState.redX -= step;\n                    gameState.brownX -= step;\n                    drawAvatar();\n                } else {\n                    gameState.teamBScore++;\n                    gameState.teamAScore = Math.max(\n                        0,\n                        gameState.teamAScore - 1\n                    );\n                    gameState.blueX += step;\n                    gameState.redX += step;\n                    gameState.brownX += step;\n                    drawAvatar();\n                }\n\n                team.display.value = "";\n\n                const teamName = isTeamA ? "Team A" : "Team B";\n                console.log(\\`\\${teamName} scored!\\`);\n                const currentTeam = isTeamA\n                    ? { score: gameState.teamAScore }\n                    : { score: gameState.teamBScore };\n\n                if (!checkWin(currentTeam, teamName)) {\n                    gameState.currentQuestionIndex =\n                        (gameState.currentQuestionIndex + 1) %\n                        gameState.questions.length;\n                    updateQuestion();\n                }\n            } else {\n                team.display.value = "";\n                showWrong(team.display);\n            }\n        });\n    }\n\n    // Initialize the game\n    setupNumberInputs(elements.teamA);\n    setupNumberInputs(elements.teamB);\n    setupClearButton(elements.teamA);\n    setupClearButton(elements.teamB);\n    setupSubmitButton(elements.teamA, true);\n    setupSubmitButton(elements.teamB, false);\n    initGame();\n<\/script>'])), renderComponent($$result, "Layout", $$Layout, {}, { "default": async ($$result2) => renderTemplate` ${maybeRenderHead()}<div class="flex flex-col items-center justify-center mt-5 relative" id="quiz"> <span class="text-3xl">Tarik Tambang Fisika</span> <div class="w-80 rounded-lg bg-white/80 backdrop-blur-sm absolute left-5 top-0" id="team-a"> <div id="question-a" class="bg-white/10 backdrop-blur-sm p-8 rounded-t-lg text-black"> ${questions.length > 0 ? questions[0].question : "Loading questions..."} </div> <table class="flex justify-center my-5"> <tr><td colspan="3"><input class="w-full border-2 rounded-md h-8 p-3 text-black" type="text" id="display-a" value="" disabled></td></tr> <tr> <td><input class="number-a" type="button" value="1"></td> <td><input class="number-a" type="button" value="2"></td> <td><input class="number-a" type="button" value="3"></td> </tr> <tr> <td><input class="number-a" type="button" value="4"></td> <td><input class="number-a" type="button" value="5"></td> <td><input class="number-a" type="button" value="6"></td> </tr> <tr> <td><input class="number-a" type="button" value="7"></td> <td><input class="number-a" type="button" value="8"></td> <td><input class="number-a" type="button" value="9"></td> </tr> <tr> <td><input id="clear-a" type="button" value="C"></td> <td><input class="number-a" type="button" value="0"></td> <td><input id="submit-a" type="button" value="Go"></td> </tr> </table> </div> <div class="flex mt-10 w-full items-center justify-center"> <div class="w-0.5 bg-black h-25 absolute"></div> <canvas id="canvas" width="700" height="300" style="max-width: 100%;">
Sorry, your browser does not support canvas.
</canvas> </div> <div class="w-80 rounded-lg bg-white/80 backdrop-blur-sm a absolute right-5 top-0" id="team-b"> <div id="question-b" class="bg-white/10 backdrop-blur-sm a p-8 rounded-t-lg text-black"> ${questions.length > 0 ? questions[0].question : "Loading questions..."} </div> <table class="flex justify-center my-5"> <tr><td colspan="3"><input class="w-full border-2 rounded-md h-8 p-3 text-black" type="text" id="display-b" value="" disabled></td></tr> <tr> <td><input class="number-b" type="button" value="1"></td> <td><input class="number-b" type="button" value="2"></td> <td><input class="number-b" type="button" value="3"></td> </tr> <tr> <td><input class="number-b" type="button" value="4"></td> <td><input class="number-b" type="button" value="5"></td> <td><input class="number-b" type="button" value="6"></td> </tr> <tr> <td><input class="number-b" type="button" value="7"></td> <td><input class="number-b" type="button" value="8"></td> <td><input class="number-b" type="button" value="9"></td> </tr> <tr> <td><input id="clear-b" type="button" value="C"></td> <td><input class="number-b" type="button" value="0"></td> <td><input id="submit-b" type="button" value="Go"></td> </tr> </table> </div> </div> ` }));
}, "D:/dev/physicsgame/src/pages/game.astro", void 0);

const $$file = "D:/dev/physicsgame/src/pages/game.astro";
const $$url = "/game";

const _page = /*#__PURE__*/Object.freeze(/*#__PURE__*/Object.defineProperty({
    __proto__: null,
    default: $$Game,
    file: $$file,
    url: $$url
}, Symbol.toStringTag, { value: 'Module' }));

const page = () => _page;

export { page };
